[TPCTL:] ReadScript \tps\scripts\1\3\1\15\1.tps
[TPCTL:] #	-SECTION_START-( 1.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Directed & Resend Directed" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.1 Send Broadcast, Receive Broadcast & Directed
[TPCTL:] ## TITLE:            & Resend Directed (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=DIRECTED

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 1.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 1.06 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.07 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 1.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 1.08 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.09 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 1.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.10 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 1.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 1.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 1.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 1.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 1.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.15 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 1.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 1.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.17 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.18 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.19 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 1.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 1.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 1.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\2.tps
[TPCTL:] #	-SECTION_START-( 2.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Directed & Resend Broadcast" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.2 Send Broadcast, Receive Broadcast & Directed
[TPCTL:] ## TITLE:            & Resend Broadcast (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 2.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 2.06 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.07 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 2.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 2.08 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.09 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 2.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.10 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 2.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 2.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 2.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 2.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 2.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.15 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 2.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 2.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.17 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.18 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.19 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 2.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 2.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 2.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\4.tps
[TPCTL:] #	-SECTION_START-( 3.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Directed & Resend Functional" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.4 Send Broadcast, Receive Broadcast & Directed
[TPCTL:] ## TITLE:            & Resend Functional (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 3.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.05 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=1                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 3.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.06 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.07 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 3.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 3.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 3.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 3.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 3.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 3.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 3.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 3.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 3.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 3.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 3.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 3.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 3.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 3.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\8.tps
[TPCTL:] #	-SECTION_START-( 4.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Functional & Resend Directed" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.8 Send Broadcast, Receive Broadcast & Functional
[TPCTL:] ## TITLE:            & Resend Directed (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & FUNCTIONAL packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=DIRECTED

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 4.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 4.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.07 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 4.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 4.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 4.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 4.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 4.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 4.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 4.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 4.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 4.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 4.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 4.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 4.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 4.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 4.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\9.tps
[TPCTL:] #	-SECTION_START-( 5.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Functional & Resend Broadcast" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.9 Send Broadcast, Receive Broadcast & Functional
[TPCTL:] ## TITLE:            & Resend Broadcast (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & FUNCTIONAL packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 5.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 5.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.07 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 5.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 5.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 5.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 5.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 5.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 5.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 5.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 5.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 5.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 5.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 5.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 5.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 5.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 5.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\10.tps
[TPCTL:] #	-SECTION_START-( 6.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Functional & Resend Functional" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.10 Send Broadcast, Receive Broadcast & Functional
[TPCTL:] ## TITLE:             & Resend Functional (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & FUNCTIONAL packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 6.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.05 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=1                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 6.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.06 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.07 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 6.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.08 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 6.08 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 6.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.10 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 6.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 6.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 6.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 6.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 6.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.15 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 6.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.16 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 6.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 6.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.18 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         60
	Packet Receive Completes       =         60	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         60
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 6.18 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.19 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.20 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 6.22 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 6.22 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 6.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\11.tps
[TPCTL:] #	-SECTION_START-( 7.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Source Routing & Resend Directed" ) -OPTIONALS-( SOURCEROUTING )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.11 Send Broadcast, Receive Broadcast & Source Routing
[TPCTL:] ## TITLE:             & Resend Directed (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & SOURCEROUTING packets.  Each packet
[TPCTL:] ## will contain a resend packet the test card will resend.  Packets
[TPCTL:] ## of size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=DIRECTED

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 7.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|SOURCEROUTING

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 7.06 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.07 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 7.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 7.08 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.09 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 7.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.10 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 7.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 7.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 7.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 7.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 7.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.15 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 7.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 7.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.17 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.18 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.19 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 7.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 7.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 7.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\12.tps
[TPCTL:] #	-SECTION_START-( 8.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Source Routing & Resend Broadcast" ) -OPTIONALS-( SOURCEROUTING )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.12 Send Broadcast, Receive Broadcast & Source Routing
[TPCTL:] ## TITLE:             & Resend Broadcast (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & SOURCEROUTING packets.  Each packet
[TPCTL:] ## will contain a resend packet the test card will resend.  Packets
[TPCTL:] ## of size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 8.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|SOURCEROUTING

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 8.06 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.07 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 8.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 8.08 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.09 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 8.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.10 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 8.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 8.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 8.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 8.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 8.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.15 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 8.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 8.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.17 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.18 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.19 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 8.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 8.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 8.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\13.tps
[TPCTL:] #	-SECTION_START-( 9.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Source Routing & Resend Functional" ) -OPTIONALS-( SOURCEROUTING )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.13 Send Broadcast, Receive Broadcast & Source Routing
[TPCTL:] ## TITLE:             & Resend Functional (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & SOURCEROUTING packets.  Each packet
[TPCTL:] ## will contain a resend packet the test card will resend.
[TPCTL:] ## Packets of size 80 bytes, 512 bytes, and MAX_FRAME_SIZE
[TPCTL:] ## bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 9.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.05 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=1                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 9.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.06 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.07 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|SOURCEROUTING

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 9.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 9.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 9.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 9.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 9.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 9.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 9.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 9.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 9.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 9.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 9.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 9.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 9.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 9.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\14.tps
[TPCTL:] #	-SECTION_START-( 10.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Mac Frame & Resend Directed" ) -OPTIONALS-( MACFRAME )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.14 Send Broadcast, Receive Broadcast & Mac Frame
[TPCTL:] ## TITLE:             & Resend Directed (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & MACFRAME packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=DIRECTED

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 10.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|MACFRAME

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 10.06 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.07 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 10.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 10.08 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.09 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 10.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.10 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 10.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 10.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 10.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 10.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 10.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.15 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 10.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 10.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.17 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.18 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.19 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 10.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 10.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 10.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\15.tps
[TPCTL:] #	-SECTION_START-( 11.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Mac Frame & Resend Broadcast" ) -OPTIONALS-( MACFRAME )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.15 Send Broadcast, Receive Broadcast & Mac Frame
[TPCTL:] ## TITLE:             & Resend Broadcast (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & MACFRAME packets.  Each packet will
[TPCTL:] ## contain a resend packet the test card will resend.  Packets of
[TPCTL:] ## size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 11.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|MACFRAME

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 11.06 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.07 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 11.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 11.08 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.09 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 11.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.10 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 11.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 11.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 11.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 11.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 11.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.15 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 11.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 11.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.17 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.18 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.19 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 11.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 11.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 11.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\16.tps
[TPCTL:] #	-SECTION_START-( 12.00 ) -SECTION_DESC-( "Send Broadcast, Receive Broadcast & Mac Frame & Resend Functional" ) -OPTIONALS-( MACFRAME )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.16 Send Broadcast, Receive Broadcast & Mac Frame
[TPCTL:] ## TITLE:             & Resend Functional (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive BROADCAST & MACFRAME packets.  Each packet will contain
[TPCTL:] ## a resend packet the test card will resend.  Packets of size
[TPCTL:] ## 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 12.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.05 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=1                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 12.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.06 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.07 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=BROADCAST|MACFRAME

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 12.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 12.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 12.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 12.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 12.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 12.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 12.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 12.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 12.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 12.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 12.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 12.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 12.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 12.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\20.tps
[TPCTL:] #	-SECTION_START-( 13.00 ) -SECTION_DESC-( "Send Broadcast, Receive Directed & Broadcast & Functional & Resend Directed" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.20 Send Broadcast, Receive Directed & Broadcast &
[TPCTL:] ## TITLE:             Functional & Resend Directed (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST & FUNCTIONAL packets.  Each
[TPCTL:] ## packet will contain a resend packet the test card will resend.
[TPCTL:] ## Packets of size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes
[TPCTL:] ## will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=DIRECTED

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 13.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST|FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 13.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.07 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 13.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 13.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 13.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 13.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 13.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 13.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 13.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 13.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 13.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 13.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 13.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 13.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 13.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 13.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\21.tps
[TPCTL:] #	-SECTION_START-( 14.00 ) -SECTION_DESC-( "Send Broadcast, Receive Directed & Broadcast & Functional & Resend Broadcast" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.21 Send Broadcast, Receive Directed & Broadcast &
[TPCTL:] ## TITLE:             Functional & Resend Broadcast (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST & FUNCTIONAL packets.  Each
[TPCTL:] ## packet will contain a resend packet the test card will resend.
[TPCTL:] ## Packets of size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes
[TPCTL:] ## will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 14.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST|FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 14.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.07 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 14.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 14.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 14.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 14.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 14.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 14.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 14.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 14.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 14.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 14.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 14.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 14.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 14.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 14.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\22.tps
[TPCTL:] #	-SECTION_START-( 15.00 ) -SECTION_DESC-( "Send Broadcast, Receive Directed & Broadcast & Functional & Resend Functional" )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.22 Send Broadcast, Receive Directed & Broadcast &
[TPCTL:] ## TITLE:             Functional & Resend Functional (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST & FUNCTIONAL packets.  Each
[TPCTL:] ## packet will contain a resend packet the test card will resend.
[TPCTL:] ## Packets of size 80 bytes, 512 bytes, and MAX_FRAME_SIZE bytes
[TPCTL:] ## will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 15.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.05 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=1                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 15.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.06 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.07 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST|FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 15.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.08 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 15.08 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 15.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.10 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 15.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 15.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 15.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 15.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 15.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.15 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 15.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.16 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 15.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 15.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.18 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         60
	Packet Receive Completes       =         60	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         60
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 15.18 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.19 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.20 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 15.22 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 15.22 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 15.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\23.tps
[TPCTL:] #   -SECTION_START-( 16.00 ) -SECTION_DESC-( "Send Broadcast, Receive Directed & Broadcast & Functional & Source Routing & Mac Frame & Resend Directed" ) -OPTIONALS-( SOURCEROUTING,MACFRAME )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.23 Send Broadcast, Receive Directed & Broadcast &
[TPCTL:] ## TITLE:             Functional & Source Routing & Mac Frame & Resend
[TPCTL:] ## TITLE:             Directed (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST & FUNCTIONAL & SOURCEROUTING
[TPCTL:] ## & MACFRAME packets.  Each packet will contain a resend packet
[TPCTL:] ## the test card will resend.  Packets of size 80 bytes, 512 bytes,
[TPCTL:] ## and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=DIRECTED

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 16.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST|FUNCTIONAL|SOURCEROUTING|MACFRAME

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 16.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.07 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 16.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 16.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 16.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 16.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 16.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 16.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 16.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_TRUSTED_CARD_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 16.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 16.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 16.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 16.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 16.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 16.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 16.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\24.tps
[TPCTL:] #  -SECTION_START-( 17.00 ) -SECTION_DESC-( "Send Broadcast, Receive Directed & Broadcast & Functional & Source Routing & Mac Frame & Resend Broadcast" ) -OPTIONALS-( SOURCEROUTING,MACFRAME )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.24 Send Broadcast, Receive Directed & Broadcast &
[TPCTL:] ## TITLE:             Functional & Source Routing & Mac Frame & Resend
[TPCTL:] ## TITLE:             Broadcast (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST & FUNCTIONAL & SOURCEROUTING
[TPCTL:] ## & MACFRAME packets.  Each packet will contain a resend packet
[TPCTL:] ## the test card will resend.  Packets of size 80 bytes, 512 bytes,
[TPCTL:] ## and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=BROADCAST

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 17.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.05 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.06 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST|FUNCTIONAL|SOURCEROUTING|MACFRAME

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 17.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.07 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 17.07 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.08 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 17.08 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 17.09 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.10 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 17.10 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.11 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 17.11 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.12 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 17.12 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.13 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 17.13 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.14 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 17.14 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.15 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 17.15 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.16 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 17.16 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         90
	Packet Receive Completes       =         90	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         90
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 17.17 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.18 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.18 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.19 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.20 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 17.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 17.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 17.00 )
[TPCTL:] ReadScript \tps\scripts\1\3\1\15\25.tps
[TPCTL:] #   -SECTION_START-( 18.00 ) -SECTION_DESC-( "Send Broadcast, Receive Directed & Broadcast & Functional & Source Routing & Mac Frame & Resend Functional" ) -OPTIONALS-( SOURCEROUTING,MACFRAME )
[TPCTL:] ##
[TPCTL:] ## TITLE: 1.3.1.15.25 Send Broadcast, Receive Directed & Broadcast &
[TPCTL:] ## TITLE:             Functional & Source Routing & Mac Frame & Resend
[TPCTL:] ## TITLE:             Functional (1M/2C/1O)
[TPCTL:] ##
[TPCTL:] ## 1 Machine - 2 Cards - 1 Open Instance on each card.  These tests
[TPCTL:] ## will have a trusted card send 10 BROADCAST packets to the card
[TPCTL:] ## being tested.  The card being tested will have its packetfilter
[TPCTL:] ## set to receive DIRECTED & BROADCAST & FUNCTIONAL & SOURCEROUTING
[TPCTL:] ## & MACFRAME packets.  Each packet will contain a resend packet
[TPCTL:] ## the test card will resend.  Packets of size 80 bytes, 512 bytes,
[TPCTL:] ## and MAX_FRAME_SIZE bytes will be sent.
[TPCTL:] ##
[TPCTL:] ## All SEND packets should be received by the test card.
[TPCTL:] ##
[TPCTL:] 
[TPCTL:] # First dump any outstanding unexpected events to clear
[TPCTL:] # the event queue.  This "should" be empty here.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.01 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.01 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.02 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.02 )
[TPCTL:] 
[TPCTL:] # And open and setup the cards.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.03 )
[TPCTL:] Open                                            +
	     OpenInstance=1                              +
	     AdapterName=TP_TRUSTED_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.03 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.04 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=1                              +
	     PacketFilter=FUNCTIONAL

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 18.04 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.05 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=1                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 18.05 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.06 )
[TPCTL:] Open                                            +
	     OpenInstance=2                              +
	     AdapterName=TP_TEST_CARD   MAY_DIFFER

	Tpctl: The Open command has been issued.

	CmdCode = Open
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.06 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.07 )
[TPCTL:] SetPacketFilter                                 +
	     OpenInstance=2                              +
	     PacketFilter=DIRECTED|BROADCAST|FUNCTIONAL|SOURCEROUTING|MACFRAME

	Tpctl: The SetPacketFilter command has been issued.

	CmdCode = SetPacketFilter

	    OID = 0x0001010E
            "OID_GEN_CURRENT_PACKET_FILTER"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 18.07 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.08 )
[TPCTL:] SetFunctionalAddress                            +
	     OpenInstance=2                              +
	     FunctionalAddress=TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The SetFunctionalAddress command has been issued.

	CmdCode = SetFunctionalAddress

	    OID = 0x02010103
            "OID_802_5_CURRENT_FUNCTIONAL"

	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE		MAY_DIFFER

	**********************************
[TPCTL:] #	-SECTION_END-( 18.08 )
[TPCTL:] 
[TPCTL:] # Now set the trusted and test cards to receive packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.09 )
[TPCTL:] Receive                                         +
	     OpenInstance=1

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 18.09 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.10 )
[TPCTL:] Receive                                         +
	     OpenInstance=2

	Tpctl: The Receive command has been issued.
[TPCTL:] #	-SECTION_END-( 18.10 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 80 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.11 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=80                               +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 18.11 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.12 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 18.12 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send 512 byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.13 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=512                              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 18.13 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.14 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 18.14 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Send "MAXIMUM FRAME SIZE" byte packets.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.15 )
[TPCTL:] Send                                            +
	     OpenInstance=1                              +
	     DestinationAddress=TP_BROADCAST_ADDRESS   MAY_DIFFER   +
	     PacketSize=TP_MAX_FRAME_SIZE   MAY_DIFFER              +
	     Number=10                                   +
	     ResendAddress=C0-00-TP_FUNCTIONAL_ADDRESS   MAY_DIFFER

	Tpctl: The Send command has been issued.
[TPCTL:] #	-SECTION_END-( 18.15 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.16 )
[TPCTL:] WaitSend                                        +
	     OpenInstance=1

	Packet Sends          =         10
	Packet Pends          =         10	MAY_DIFFER
	Packet Send Completes =         10	EQUAL_LAST
	Packet Send Fails     =          0
[TPCTL:] #	-SECTION_END-( 18.16 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Then stop the receives and dump the statistics.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.17 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=1

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         30
	Packet Receive Completes       =         30	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =          0
	RESEND initiated Packet Send Pends     =          0	MAY_DIFFER
	RESEND initiated Packet Send Completes =          0	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         30
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 18.17 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.18 )
[TPCTL:] StopReceive                                     +
	     OpenInstance=2

	Tpctl: The StopReceive command has been issued.

	Packet Receives                =         60
	Packet Receive Completes       =         60	MAY_DIFFER
	Corrupt Receives               =          0

	RESEND initiated Packet Sends          =         30
	RESEND initiated Packet Send Pends     =         30	MAY_DIFFER
	RESEND initiated Packet Send Completes =         30	EQUAL_LAST
	RESEND initiated Packet Send Fails     =          0

	Packet Transfer Data           =         60
	Packet Transfer Data Pends     =          0	MAY_DIFFER
	Packet Transfer Data Completes =          0	EQUAL_LAST
	Packet Transfer Data Fails     =          0
[TPCTL:] #	-SECTION_END-( 18.18 )
[TPCTL:] 
[TPCTL:] ########################################################
[TPCTL:] 
[TPCTL:] # Finally close the adapters, and again dump the Event
[TPCTL:] # Queue for any unexpected events.
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.19 )
[TPCTL:] Close                                           +
	     OpenInstance=1

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.19 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.20 )
[TPCTL:] Close                                           +
	     OpenInstance=2

	Tpctl: The Close command has been issued.

	CmdCode = Close
	Return Status = NDIS_STATUS_SUCCESS
	Request Pended = TRUE	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.20 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.21 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=1

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.21 )
[TPCTL:] 
[TPCTL:] #	-SECTION_START-( 18.22 )
[TPCTL:] GetEvents                                       +
	     OpenInstance=2

	Tpctl: Event Queue is empty.	MAY_DIFFER
[TPCTL:] #	-SECTION_END-( 18.22 )
[TPCTL:] 
[TPCTL:] #	-SECTION_END-( 18.00 )
